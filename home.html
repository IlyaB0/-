<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Цветничок у Оли | Главная</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Специфичные стили для главной страницы */
        
        /* Герой-секция */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://images.unsplash.com/photo-1464207687429-7505649dae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: var(--white);
            text-align: center;
            padding: 100px 20px;
            margin-bottom: 60px;
        }
        
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-family: 'Brush Script MT', cursive;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .hero p {
            font-size: 1.3rem;
            margin-bottom: 30px;
        }
        
        /* Секции */
        .section {
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section-title {
            text-align: center;
            font-size: 2.5rem;
            color: var(--dark-red);
            margin-bottom: 50px;
            font-family: 'Brush Script MT', cursive;
        }
        
        /* АКЦИЯ Скидка при самовывозе - НОВЫЙ БЛОК */
        .discount-section {
            padding: 40px 20px;
            max-width: 1200px;
            margin: 0 auto 60px auto;
        }
        
        .discount-container {
            text-align: center;
            background: linear-gradient(145deg, #2ecc71, #27ae60);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(46, 204, 113, 0.3);
            border: 5px solid white;
            position: relative;
            overflow: hidden;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .discount-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #e74c3c;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            transform: rotate(5deg);
            box-shadow: 3px 3px 5px rgba(0,0,0,0.2);
            z-index: 3;
        }
        
        .discount-title {
            color: white;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            position: relative;
            z-index: 2;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .discount-percent {
            color: #fff;
            font-size: 100px;
            font-weight: 900;
            margin: 10px 0;
            position: relative;
            z-index: 2;
            text-shadow: 3px 3px 0 #27ae60,
                         6px 6px 0 rgba(0,0,0,0.1);
            line-height: 1;
        }
        
        .discount-percent::after {
            content: '%';
            font-size: 50px;
            vertical-align: super;
            margin-left: -10px;
        }
        
        .discount-subtitle {
            color: #e8f8ef;
            font-size: 18px;
            font-weight: 600;
            margin-top: 10px;
            position: relative;
            z-index: 2;
            letter-spacing: 1px;
        }
        
        /* Декоративные элементы акции */
        .discount-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: float 20s linear infinite;
        }
        
        @keyframes float {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Эффект свечения для акции */
        .discount-container:hover {
            animation: glow 1s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 10px 30px rgba(46, 204, 113, 0.3),
                            0 0 20px rgba(46, 204, 113, 0.5);
            }
            to {
                box-shadow: 0 10px 40px rgba(46, 204, 113, 0.5),
                            0 0 30px rgba(46, 204, 113, 0.8);
            }
        }
        
        /* Акции */
        .promotions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 80px;
        }
        
        .promo-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
            border: 1px solid var(--pale-red);
        }
        
        .promo-card:hover {
            transform: translateY(-10px);
        }
        
        .promo-badge {
            background-color: var(--primary-red);
            color: var(--white);
            padding: 8px 20px;
            display: inline-block;
            font-weight: bold;
            position: absolute;
            top: 20px;
            left: 0;
            border-radius: 0 20px 20px 0;
            z-index: 1;
        }
        
        .promo-image {
            height: 200px;
            overflow: hidden;
            position: relative;
        }
        
        .promo-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .promo-card:hover .promo-image img {
            transform: scale(1.05);
        }
        
        .promo-content {
            padding: 25px;
        }
        
        .promo-title {
            font-size: 1.5rem;
            color: var(--dark-gray);
            margin-bottom: 10px;
        }
        
        .promo-text {
            color: var(--text-gray);
            margin-bottom: 20px;
        }
        
        .promo-price {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .old-price {
            text-decoration: line-through;
            color: #a0a0a0;
            font-size: 1.2rem;
        }
        
        .new-price {
            color: var(--primary-red);
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        /* Преимущества */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 80px;
        }
        
        .feature {
            text-align: center;
            padding: 30px 20px;
            border-radius: var(--border-radius);
            background-color: var(--pale-red);
            transition: transform 0.3s;
            border: 1px solid rgba(211, 47, 47, 0.1);
        }
        
        .feature:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 3rem;
            color: var(--primary-red);
            margin-bottom: 20px;
        }
        
        .feature-title {
            font-size: 1.5rem;
            color: var(--dark-gray);
            margin-bottom: 15px;
        }
        
        /* Отзывы */
        .reviews {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 80px;
        }
        
        .review-card {
            background-color: var(--white);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--pale-red);
        }
        
        .review-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .review-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary-red);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .review-info h4 {
            color: var(--dark-gray);
            margin-bottom: 5px;
        }
        
        .review-rating {
            color: #ffc107;
        }
        
        /* Подписка на рассылку */
        .newsletter {
            background: linear-gradient(135deg, var(--pale-red) 0%, #ffcdd2 100%);
            padding: 60px 20px;
            text-align: center;
            border-radius: var(--border-radius);
            margin-bottom: 80px;
            border: 1px solid rgba(211, 47, 47, 0.2);
        }
        
        .newsletter-title {
            font-size: 2.2rem;
            color: var(--dark-red);
            margin-bottom: 20px;
            font-family: 'Brush Script MT', cursive;
        }
        
        .newsletter-form {
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            gap: 10px;
        }
        
        .newsletter-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
        }
        
        /* Стили для акционных товаров и новинок */
        .products-showcase {
            margin: 60px 0;
        }
        
        .showcase-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 60px;
        }
        
        .product-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
            position: relative;
            border: 1px solid var(--pale-red);
        }
        
        .product-card:hover {
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            transform: translateY(-5px);
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background-color: var(--primary-red);
            color: var(--white);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 1;
        }
        
        .product-favorite {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: white;
            border: none;
            color: #ccc;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .product-favorite:hover,
        .product-favorite.active {
            color: var(--primary-red);
            transform: scale(1.1);
        }
        
        .product-image {
            height: 220px;
            overflow: hidden;
            position: relative;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-content {
            padding: 20px;
        }
        
        .product-title {
            font-size: 1.3rem;
            color: var(--dark-gray);
            margin-bottom: 10px;
            height: 60px;
            overflow: hidden;
        }
        
        .product-description {
            color: var(--text-gray);
            font-size: 0.9rem;
            margin-bottom: 15px;
            height: 40px;
            overflow: hidden;
        }
        
        .product-price {
            color: var(--primary-red);
            font-size: 1.6rem;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .old-price {
            text-decoration: line-through;
            color: #999;
            font-size: 1.2rem;
            margin-right: 10px;
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-details {
            padding: 10px 20px;
            background-color: transparent;
            color: var(--primary-red);
            border: 2px solid var(--primary-red);
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-details:hover {
            background-color: var(--pale-red);
        }
        
        .welcome-user {
            background-color: var(--pale-red);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 40px;
            text-align: center;
            border-left: 5px solid var(--primary-red);
        }
        
        .welcome-user h2 {
            color: var(--dark-red);
            margin-bottom: 10px;
        }
        
        .user-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            color: var(--primary-red);
            font-weight: bold;
        }
        
        .stat-label {
            color: var(--text-gray);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Проверка авторизации -->
    <script>
        if (!localStorage.getItem('currentUser')) {
            window.location.href = 'index.html';
        }
    </script>
    
<!-- Шапка сайта -->
<header class="header">
    <div class="header-container">
        <div class="header-main">
            <div class="logo-section">
                <div class="logo-icon-wrapper">
                    <i class="fas fa-spa"></i>
                </div>
                <div class="logo-text">
                    <h1 class="logo-title">Цветничок у Оли</h1>
                    <p class="logo-subtitle">Красивые цветы для вашего настроения</p>
                </div>
            </div>
            
            <div class="header-contacts">
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <div class="contact-info">
                        <span class="contact-number">+375 25 530-99-49</span>
                        <span class="contact-number">+375 33 623-94-33</span>
                    </div>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span class="contact-address">г.п. Вороново, ул. Аэродромная, д. 25</span>
                </div>
            </div>
            
            <div class="header-actions">
                <div class="user-section">
                    <span id="user-greeting"></span>
                    <a href="#" id="logout" class="logout-btn">Выйти</a>
                </div>
                <a href="cart.html" class="cart-button" id="open-cart">
                    <i class="fas fa-shopping-basket"></i>
                    <span class="cart-badge" id="cart-count">0</span>
                </a>
            </div>
        </div>
        
        <nav class="main-nav">
            <a href="home.html" class="nav-link active">
                <i class="fas fa-home"></i>
                <span>Главная</span>
            </a>
            <a href="catalog.html" class="nav-link">
                <i class="fas fa-th-large"></i>
                <span>Каталог</span>
            </a>
            <a href="contacts.html" class="nav-link">
                <i class="fas fa-address-book"></i>
                <span>Контакты</span>
            </a>
            <a href="account.html" class="nav-link">
                <i class="fas fa-user"></i>
                <span>Мой аккаунт</span>
            </a>
  <a href="news.html" class="nav-link">
                <i class="fas fa-newspaper"></i>
                <span>Новости</span>
            </a>
        </nav>
    </div>
</header>

    <!-- Приветствие пользователя -->
    <div class="section">
        <div class="welcome-user">
            <h2 id="welcome-message">Добро пожаловать!</h2>
        </div>
    </div>
    
    <!-- Герой-секция -->
    <section class="hero">
        <div class="hero-content">
            <h1>Цветы, которые говорят о любви</h1>
            <p>Эксклюзивные цветы от Олечки. Доставка по Вороновскому району в течение 2 суток.</p>
            <a href="catalog.html" class="btn btn-primary">Выбрать букет</a>
            <a href="#promotions" class="btn btn-secondary">Акции</a>
        </div>
    </section>
    


    <!-- Акционные товары -->
    <section class="section" id="promotions">
        <h2 class="section-title">Акционные предложения</h2>
        <div class="showcase-grid" id="promotional-products">
            <!-- Акционные товары будут добавлены через JavaScript -->

        </div>
    </section>


    
    <!-- Новинки сезона -->
    <section class="section">
        <h2 class="section-title">Новинки сезона</h2>
        <div class="showcase-grid" id="new-season-products">
            <!-- Новинки будут добавлены через JavaScript -->

        </div>
    </section>
    
    <!-- Преимущества -->
    <section class="section">
        <h2 class="section-title">Почему выбирают нас</h2>
        <div class="features">
            <div class="feature">
                <div class="feature-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <h3 class="feature-title">Свежие цветы</h3>
                <p>Мы работаем с цветами уже больше 5 лет, поэтому наши цветы всегда свежие и долго радуют своей красотой.</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">
                    <i class="fas fa-shipping-fast"></i>
                </div>
                <h3 class="feature-title">Быстрая доставка</h3>
                <p>Доставляем букеты в течение 2 суток по Вороновскому району. Работаем 7 дней в неделю.</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">
                    <i class="fas fa-award"></i>
                </div>
                <h3 class="feature-title">Опытная Олечка</h3>
                <p>Олечка - занимается цветами уже более 5 лет. Каждый цветок создается с любовью и вниманием к деталям.</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <h3 class="feature-title">Подход к цветам</h3>
                <p>Выращиваем цветы круглый год и заботимся о каждом для вас.</p>
            </div>
        </div>
    </section>
    
    <!-- Отзывы -->
    <section class="section">
        <h2 class="section-title">Отзывы наших клиентов</h2>
        <div class="reviews">
            <div class="review-card">
                <div class="review-header">
                    <div class="review-avatar">АП</div>
                    <div class="review-info">
                        <h4>Анна Петрова</h4>
                        <div class="review-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
                <p>"Заказывала цветы на годовщину свадьбы. Цветы были невероятно свежие и красивые! Муж был в восторге. Доставка пришла точно в указанное время. Обязательно буду заказывать еще!"</p>
            </div>
            
            <div class="review-card">
                <div class="review-header">
                    <div class="review-avatar">МС</div>
                    <div class="review-info">
                        <h4>Максим Смирнов</h4>
                        <div class="review-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                    </div>
                </div>
                <p>"Пользуюсь услугами магазина уже больше года. Всегда качественные цветы, профессиональные флористы. Особенно нравится сервис доставки - всегда вовремя и аккуратно."</p>
            </div>
            
            <div class="review-card">
                <div class="review-header">
                    <div class="review-avatar">ЕК</div>
                    <div class="review-info">
                        <h4>Екатерина Ковалева</h4>
                        <div class="review-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
                <p>"Заказала цветы для подруги на день рождения. Сделали именно то, что я хотела, даже лучше! Подруга была в полном восторге. Теперь рекомендую ваш магазин всем знакомым!"</p>
            </div>
        </div>
    </section>
    
   
    
    <!-- Футер -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h3>Цветнечёк у Олечки</h3>
                <p>Магазин цветов с душой. Мы создаем красивые букеты, которые дарят радость и выражают ваши чувства.</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-vk"></i></a>
                    <a href="#"><i class="fab fa-telegram"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            
            <div class="footer-column">
                <h3>Магазин</h3>
                <ul class="footer-links">
                    <li><a href="catalog.html">Каталог букетов</a></li>
            
                    <li><a href="#promotions">Акции и скидки</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Помощь</h3>
                <ul class="footer-links">
                    <li><a href="#">Доставка и оплата</a></li>
                    <li><a href="#">Уход за цветами</a></li>
                    <li><a href="#">Частые вопросы</a></li>
                    <li><a href="contacts.html">Контакты</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Контакты</h3>
                <p><i class="fas fa-map-marker-alt"></i> г.п. Вороново, ул. Аэродромная, д. 25</p>
                <p><i class="fas fa-phone"></i> +375 25 530-99-49 / +375 (33) 623-94-33</p>
                <p><i class="fas fa-envelope"></i> olgabalts@gmail.com / ilyabalt345ilya1@gmail.com</p>
                <p><i class="fas fa-clock"></i> Ежедневно с 10:00 до 20:00</p>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2026 Магазин цветов "Цветнечёк у Олечки". Все права защищены.</p>
        </div>
    </footer>

    <!-- Корзина (модальное окно) -->
    <div class="cart-modal" id="cart-modal">
        <div class="cart-header">
            <h3>Корзина</h3>
            <button class="close-cart" id="close-cart">&times;</button>
        </div>
        <div class="cart-content" id="cart-content">
            <!-- Содержимое корзины -->
        </div>
        <div class="cart-summary" id="cart-summary">
            <div class="cart-total">
                <span>Итого:</span>
                <span class="cart-total-amount" id="cart-total">0 руб.</span>
            </div>
            <button class="checkout-btn" id="checkout-btn" disabled>Оформить заказ</button>
        </div>
    </div>
    
    <!-- Уведомление -->
    <div class="notification" id="notification">
        Товар добавлен в корзину!
    </div>

    <script>
    // Проверка авторизации
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) {
        window.location.href = 'index.html';
    }
    
    // ТОВАРЫ ДЛЯ АКЦИЙ
    const promotionalProducts = [
        { 
            id: 1, 
            name: "Георгины вегетативные", 
            price: 8, 
            oldPrice: 12,
            description: "Низкорослые георгины для сада",
            image: "https://i.okcdn.ru/i?r=CFRAm_VFBkioSGBqh1KLntt06MFo4g5uSnK0cvpuqrPJ995xVi3fxSXrV17J_etk9d0segI-1U3enf481quDrAG8n2RMBiefhyQv195j0SSEkZlA_QAAACk", 
            badge: "АКЦИЯ"
        },
        { 
            id: 2, 
            name: "Бальзамин новогвинейский", 
            price: 9, 
            oldPrice: 15,
            description: "Декоративный бальзамин с яркими цветами",
            image: "https://i.okcdn.ru/i?r=CFRAm_VFBkioSGBqh1IKUtFwKHEdY8wagSMfym_uNdySumU0muPNNzMA_YkvAJr0qZWh0LUrQHkkrKLFoR_NKBNgH88vL7jCk33EPsT0KoYMXUWEAgAAACk", 
            badge: "СКИДКА"
        },
        { 
            id: 5, 
            name: "Букет 'Страсть'", 
            price: 38, 
            oldPrice: 45,
            description: "Яркие красные розы в элегантной упаковке",
            image: "https://images.unsplash.com/photo-1464207687429-7505649dae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
            badge: "АКЦИЯ"
        }
    ];
    
    // ТОВАРЫ ДЛЯ НОВИНОК
    const newSeasonProducts = [
        { 
            id: 3, 
            name: "Бегонии", 
            price: 6, 
            description: "Красивые бегонии для дома и сада",
            image: "https://i.okcdn.ru/i?r=CFxAm_VFBkioSGBqh1LamAAOc8pbUTclt-RyglJI6NK9iz8eUjTKfFt-d3OFUsyZsqltUpmMLTCX19JX_Uh8fEGjMNCf3zMd-p_D-QeyziEhVmlGoAgunXwsIg68AAAAKQ", 
            badge: "НОВИНКА"
        },
        { 
            id: 4, 
            name: "Розы красные", 
            price: 12, 
            description: "Красные розы, 10 штук",
            image: "https://images.unsplash.com/photo-1518621736915-f3b1c41bfd00", 
            badge: "НОВОЕ"
        },
        { 
            id: 6, 
            name: "Тюльпаны весенние", 
            price: 15, 
            description: "Яркие тюльпаны разных цветов",
            image: "https://images.unsplash.com/photo-1495231916356-a86217efff12", 
            badge: "СЕЗОН"
        }
    ];
    
    // Корзина
    let cart = JSON.parse(localStorage.getItem('flowerCart')) || [];
    
    // Когда страница загрузилась
    document.addEventListener('DOMContentLoaded', function() {
        // Показываем имя пользователя
        if (currentUser) {
            const greetingElement = document.getElementById('user-greeting');
            const welcomeElement = document.getElementById('welcome-message');
            
            if (greetingElement) {
                greetingElement.textContent = `Привет, ${currentUser.name}!`;
            }
            if (welcomeElement) {
                welcomeElement.textContent = `Добро пожаловать, ${currentUser.name}!`;
            }
        }
        
        // Показываем товары
        showPromotionalProducts();
        showNewSeasonProducts();
        
        // Обновляем корзину
        updateCartCount();
        
        // Настраиваем кнопки
        setupButtons();
    });
    
    // Показать акционные товары
    function showPromotionalProducts() {
        const container = document.getElementById('promotional-products');
        if (!container) return;
        
        let html = '';
        
        promotionalProducts.forEach(product => {
            const isFavorite = checkFavoriteStatus(product.id);
            const heartClass = isFavorite ? 'fas fa-heart' : 'far fa-heart';
            
            html += `
            <div class="product-card">
                ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                <button class="product-favorite ${isFavorite ? 'active' : ''}" onclick="toggleFavorite(${product.id})">
                    <i class="${heartClass}"></i>
                </button>
                <div class="product-image">
                    <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300x200?text=Цветок'">
                </div>
                <div class="product-content">
                    <h3 class="product-title">${product.name}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="product-price">
                        ${product.oldPrice ? `<span class="old-price">${product.oldPrice} руб.</span>` : ''}
                        ${product.price} руб.
                    </div>
                    <div class="product-actions">
                        <button class="btn btn-primary btn-small" onclick="addToCart(${product.id})">В корзину</button>
                        <a href="product-details.html?id=${product.id}" class="btn-details">Подробнее</a>
                    </div>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }
    
    // Показать новинки сезона
    function showNewSeasonProducts() {
        const container = document.getElementById('new-season-products');
        if (!container) return;
        
        let html = '';
        
        newSeasonProducts.forEach(product => {
            const isFavorite = checkFavoriteStatus(product.id);
            const heartClass = isFavorite ? 'fas fa-heart' : 'far fa-heart';
            
            html += `
            <div class="product-card">
                ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                <button class="product-favorite ${isFavorite ? 'active' : ''}" onclick="toggleFavorite(${product.id})">
                    <i class="${heartClass}"></i>
                </button>
                <div class="product-image">
                    <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300x200?text=Цветок'">
                </div>
                <div class="product-content">
                    <h3 class="product-title">${product.name}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="product-price">${product.price} руб.</div>
                    <div class="product-actions">
                        <button class="btn btn-primary btn-small" onclick="addToCart(${product.id})">В корзину</button>
                        <a href="product-details.html?id=${product.id}" class="btn-details">Подробнее</a>
                    </div>
                </div>
            </div>
            `;
        });
        
        container.innerHTML = html;
    }
    
    // Проверить избранное
    function checkFavoriteStatus(productId) {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser) return false;
        
        const users = JSON.parse(localStorage.getItem('flowerShopUsers')) || [];
        const user = users.find(u => u.email === currentUser.email);
        
        return user && user.favorites && user.favorites.includes(productId);
    }
    
    // Переключить избранное
    window.toggleFavorite = function(productId) {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser) {
            alert('Войдите в аккаунт чтобы добавить в избранное');
            return;
        }
        
        const users = JSON.parse(localStorage.getItem('flowerShopUsers')) || [];
        const userIndex = users.findIndex(u => u.email === currentUser.email);
        
        if (userIndex === -1) return;
        
        if (!users[userIndex].favorites) {
            users[userIndex].favorites = [];
        }
        
        const favorites = users[userIndex].favorites;
        const isFavorite = favorites.includes(productId);
        
        if (!isFavorite) {
            // Добавить
            favorites.push(productId);
            showMessage('Товар добавлен в избранное');
            
            // Обновить иконку
            const button = event.target.closest('.product-favorite');
            const icon = button.querySelector('i');
            icon.className = 'fas fa-heart';
            button.classList.add('active');
        } else {
            // Удалить
            users[userIndex].favorites = favorites.filter(id => id !== productId);
            showMessage('Товар удален из избранного');
            
            // Обновить иконку
            const button = event.target.closest('.product-favorite');
            const icon = button.querySelector('i');
            icon.className = 'far fa-heart';
            button.classList.remove('active');
        }
        
        localStorage.setItem('flowerShopUsers', JSON.stringify(users));
    };
    
    // Добавить в корзину
    window.addToCart = function(productId) {
        const allProducts = [...promotionalProducts, ...newSeasonProducts];
        const product = allProducts.find(p => p.id === productId);
        
        if (!product) {
            showMessage('Товар не найден');
            return;
        }
        
        // Проверить есть ли уже в корзине
        let item = cart.find(item => item.id === productId);
        
        if (item) {
            item.quantity += 1;
        } else {
            cart.push({
                id: product.id,
                name: product.name,
                price: product.price,
                image: product.image,
                quantity: 1
            });
        }
        
        // Сохранить
        localStorage.setItem('flowerCart', JSON.stringify(cart));
        
        // Обновить счетчик
        updateCartCount();
        
        // Показать сообщение
        showMessage(`"${product.name}" добавлен в корзину!`);
    };
    
    // Обновить счетчик корзины
    function updateCartCount() {
        const countElement = document.getElementById('cart-count');
        if (!countElement) return;
        
        const total = cart.reduce((sum, item) => sum + item.quantity, 0);
        countElement.textContent = total;
    }
    
    // Показать сообщение
    function showMessage(text) {
        // Создать или найти уведомление
        let notification = document.getElementById('notification');
        if (!notification) {
            notification = document.createElement('div');
            notification.id = 'notification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--primary-red);
                color: white;
                padding: 15px 25px;
                border-radius: 5px;
                z-index: 1000;
                display: none;
            `;
            document.body.appendChild(notification);
        }
        
        notification.textContent = text;
        notification.style.display = 'block';
        
        setTimeout(() => {
            notification.style.display = 'none';
        }, 3000);
    }
    
    // Настроить кнопки
    function setupButtons() {
        // Выход
        const logoutBtn = document.getElementById('logout');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            });
        }
    }
</script>
</body>
</html>